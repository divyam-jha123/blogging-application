<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blogify</title>

  <%- include('./partials/head') %>
</head>

<body>
  <%- include('./partials/nav') %>

    <div class="container mt-4">
      <div class="row">
        <% if (blogs && blogs.length> 0) { %>
          <% blogs.forEach(blog=> { %>
            <div class="col-md-4 mb-4">
              <div class="card h-100">
                <% if (blog.converImageUrl) { %>
                  <img src="<%= blog.converImageUrl %>" class="card-img-top" alt="<%= blog.title %>"
                    style="height: 180px; object-fit: cover;">
                  <% } else { %>
                    <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center"
                      style="height: 180px;">
                      <span class="text-white">No Image</span>
                    </div>
                    <% } %>
                      <div class="card-body">
                        <h5 class="card-title">
                          <%= blog.title %>
                        </h5>
                        <p class="card-text text-muted">
                          <%= blog.body ? blog.body.substring(0, 100) + '...' : '' %>
                        </p>
                      </div>
                      <div class="card-footer">
                        <small class="text-muted">
                          <%= new Date(blog.createdAt).toLocaleDateString() %>
                        </small>
                        <a href="/blog/<%= blog._id %>" class="btn btn-primary btn-sm float-end">Read More</a>
                      </div>
              </div>
            </div>
            <% }) %>
              <% } else { %>
                <div class="col-12 text-center py-5">
                  <h4>No blogs yet</h4>
                  <p class="text-muted">Be the first to create a blog!</p>
                  <a href="/blog/add-new" class="btn btn-primary">Create Blog</a>
                </div>
                <% } %>
      </div>
    </div>

    <%- include('./partials/script') %>
</body>

</html>